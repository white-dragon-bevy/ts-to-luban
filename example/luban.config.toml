# Luban Schema Generator 配置示例

[project]
tsconfig = "tsconfig.json"

[output]
path = "output/generated.xml"
cache_file = ".luban-cache.json"
module_name = "triggers"
# Bean 类型枚举输出配置（按 parent 分组，使用全局 module_name）
bean_types_path = "output/bean_types.xml"

# 单独测试 spec1.ts
[[sources]]
type = "file"
path = "src/triggers/spec1.ts"
output_path = "output/spec1.xml"
module_name = "spec1"

# 扫描目录 (包含 @ignore 测试)
[[sources]]
type = "directory"
path = "src/triggers"
output_path = "output/generated.xml"

# Glob 模式匹配（支持 *, **, ? 等通配符）
# [[sources]]
# type = "glob"
# pattern = "src/**/*Trigger.ts"
# output_path = "output/triggers.xml"  # 可选
# module_name = "triggers"             # 可选

# 多个文件（共享同一个输出路径和 module_name）
# [[sources]]
# type = "files"
# paths = ["src/types/events.ts", "src/types/player.ts", "src/types/enemy.ts"]
# output_path = "output/types.xml"
# module_name = "types"  # 可选：覆盖默认 module_name，允许空字符串

# 正则匹配设置 parent
[[parent_mappings]]
pattern = "Spawn.*"
parent = "SpawnBase"

[[parent_mappings]]
pattern = ".*Trigger$"
parent = "TriggerBase"

# 导入共享包配置
# - 合并 sources（路径相对于被引用配置解析）
# - 合并 parent_mappings（根配置优先，相同 pattern 不覆盖）
[[ref_configs]]
path = "./shared-pkg/ts-luban.config.toml"

[defaults]
base_class = "TsClass"

[type_mappings]
Vector3 = "Vector3"
Entity = "number"
