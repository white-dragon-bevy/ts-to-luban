[project]
tsconfig = "tsconfig.json"

[output]
path = "configs/defines/examples.xml"
module_name = "examples"
table_output_path = "src/types/configs"

# 第一个数据源 - 基础类（TsClass）
[[sources]]
type = "file"
path = "src/__examples__/base.ts"
output_path = "configs/defines/base.xml"
module_name = "base"

# 第二个数据源 - 核心表
[[sources]]
type = "file"
path = "src/__examples__/all-validators.ts"

# 第二个数据源 - 物品模块（独立输出）
[[sources]]
type = "file"
path = "src/__examples__/items.ts"
output_path = "configs/defines/items.xml"
module_name = "items"

# 第三个数据源 - 不同 mode 的 table
[[sources]]
type = "file"
path = "src/__examples__/table-modes.ts"
output_path = "configs/defines/table-modes.xml"
module_name = "modes"

# 第四个数据源 - 继承关系测试
[[sources]]
type = "file"
path = "src/__examples__/inheritance.ts"
output_path = "configs/defines/inheritance.xml"
module_name = "inheritance"

# 第五个数据源 - Constructor<T> 类型测试
[[sources]]
type = "file"
path = "src/__examples__/constructor-type.ts"
output_path = "configs/defines/constructor-type.xml"
module_name = "constructor"

# 第六个数据源 - 字段可见性测试（私有字段、接口、readonly）
[[sources]]
type = "file"
path = "src/__examples__/field-visibility.ts"
output_path = "configs/defines/field-visibility.xml"
module_name = "field_visibility"
# 第六个数据源 - 虚拟字段测试
[[sources]]
type = "file"
path = "src/__examples__/virtual-fields.ts"
output_path = "configs/defines/virtual-fields.xml"
module_name = "virtual_fields"

# 第七个数据源 - 判别联合类型测试（$type 字段过滤）
[[sources]]
type = "file"
path = "src/__examples__/discriminated-union.ts"
output_path = "configs/defines/discriminated-union.xml"
module_name = "discriminated_union"

# 第八个数据源 - $type<T> 类型包装器测试
[[sources]]
type = "file"
path = "src/__examples__/dollar-type.ts"
output_path = "configs/defines/dollar-type.xml"
module_name = "dollar_type"

# Table 配置 - 替代 @LubanTable 装饰器
[tables]
# all-validators.ts
"examples.Item" = "../datas/item"
"examples.Skill" = "../datas/skill"
"examples.Monster" = "../datas/monster"
"examples.Player" = "../datas/player"
"examples.Difficulty" = "../datas/difficulty"
"examples.Team" = "../datas/team"

# items.ts
"items.Weapon" = "../datas/equipment/weapon"
"items.Armor" = "../datas/equipment/armor"

# table-modes.ts
"modes.LeaderboardEntry" = { input = "../datas/leaderboard", mode = "list", index = "rank" }
"modes.GameConfig" = { input = "../datas/game-config", mode = "one" }
"modes.ServerSettings" = { input = "../datas/server-settings", mode = "singleton" }

# virtual-fields.ts
"virtual_fields.WeaponConfig" = "../datas/weapon-config"
"virtual_fields.ArmorConfig" = "../datas/armor-config"

# constructor-type.ts
"constructor.CharacterConfig" = "../datas/character-config"

# 虚拟字段配置：WeaponConfig
[[virtual_fields]]
class = "WeaponConfig"
fields = [
    { name = "mainStat", type = "ScalingStat", comment = "主属性", relocate_to = { target = "TScalingStat", prefix = "_main" } }
]

# 虚拟字段配置：WeaponConfig 第二个配置块（支持同一 class 多个配置）
[[virtual_fields]]
class = "WeaponConfig"
fields = [
    { name = "subStat", type = "ScalingStat", comment = "副属性", relocate_to = { target = "TScalingStat", prefix = "_sub" } }
]

# 虚拟字段配置：ArmorConfig
[[virtual_fields]]
class = "ArmorConfig"
fields = [
    { name = "defenseStat", type = "ScalingStat", comment = "防御属性", relocate_to = { target = "TScalingStat", prefix = "_defense" } }
]
